"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.update = void 0;
const devkit_1 = require("@nx/devkit");
async function update(tree) {
    const projects = (0, devkit_1.getProjects)(tree);
    projects.forEach((config) => {
        if (config.targets?.test?.executor !== '@nrwl/jest:jest')
            return;
        (0, devkit_1.visitNotIgnoredFiles)(tree, config.sourceRoot, (file) => {
            if (!file.endsWith('.spec.ts'))
                return;
            const content = tree.read(file).toString();
            if (content.includes('@testing-library/react-hooks')) {
                tree.write(file, content.replace(/@testing-library\/react-hooks/g, '@testing-library/react'));
            }
        });
    });
    (0, devkit_1.removeDependenciesFromPackageJson)(tree, ['@testing-library/react-hooks'], ['@testing-library/react-hooks']);
}
exports.update = update;
exports.default = update;
